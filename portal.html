<!DOCTYPE html>
<html>
<head>
<title>Recharge Portal</title>

<style>
body{
font-family:arial;
background:#f1f3f6;
text-align:center;
}

.box{
background:white;
width:350px;
margin:20px auto;
padding:20px;
border-radius:10px;
box-shadow:0 0 10px #ccc;
}

input,button{
width:90%;
padding:10px;
margin:6px;
border-radius:5px;
border:1px solid #ccc;
}

button{
background:#0b7dda;
color:white;
cursor:pointer;
}

button:hover{background:#095c9d;}

.hidden{display:none;}

.approve{
background:green;
padding:5px 10px;
color:white;
border:none;
cursor:pointer;
}

</style>
</head>

<body>

<h2>Recharge Portal</h2>

<div class="box">
<button onclick="showAdmin()">Admin Login</button>
<button onclick="showRetailer()">Retailer Login</button>
<button onclick="showRegister()">Retailer Registration</button>
</div>

<!-- ADMIN LOGIN -->
<div id="adminLogin" class="box hidden">
<h3>Admin Login</h3>
<input id="adminUser" placeholder="Admin ID">
<input id="adminPass" type="password" placeholder="Password">
<button onclick="adminLogin()">Login</button>
</div>

<!-- ADMIN PANEL -->
<div id="adminPanel" class="box hidden">
<h3>Admin Panel</h3>
<div id="retailerList"></div>
<button onclick="logout()">Logout</button>
</div>

<!-- RETAILER LOGIN -->
<div id="retailerLogin" class="box hidden">
<h3>Retailer Login</h3>
<input id="retUser" placeholder="Retailer ID">
<input id="retPass" type="password" placeholder="Password">
<button onclick="retailerLogin()">Login</button>
<p id="retMsg"></p>
</div>

<!-- RETAILER PANEL -->
<div id="retailerPanel" class="box hidden">
<h3>Retailer Dashboard</h3>
<p>Welcome Retailer âœ” Services Activated</p>
<button onclick="logout()">Logout</button>
</div>

<!-- REGISTRATION -->
<div id="register" class="box hidden">
<h3>Retailer Registration</h3>
<input id="name" placeholder="Name">
<input id="mobile" placeholder="Mobile">
<input id="userid" placeholder="Create User ID">
<input id="password" type="password" placeholder="Create Password">
<button onclick="register()">Register</button>
</div>

<script>

// Default Admin
localStorage.setItem("admin","admin");
localStorage.setItem("adminpass","123456");

// SHOW SECTIONS
function hideAll(){
document.querySelectorAll(".box").forEach(b=>b.classList.add("hidden"));
}

function showAdmin(){hideAll();adminLogin.classList.remove("hidden");}
function showRetailer(){hideAll();retailerLogin.classList.remove("hidden");}
function showRegister(){hideAll();register.classList.remove("hidden");}

// REGISTER
function register(){
let data={
name:name.value,
mobile:mobile.value,
user:userid.value,
pass:password.value,
status:"pending"
};

let list=JSON.parse(localStorage.getItem("retailers")||"[]");
list.push(data);
localStorage.setItem("retailers",JSON.stringify(list));

alert("Registration Done! Wait for Admin Approval");
hideAll();
}

// ADMIN LOGIN
function adminLogin(){
if(adminUser.value==localStorage.admin && adminPass.value==localStorage.adminpass){
hideAll();
adminPanel.classList.remove("hidden");
loadRetailers();
}else alert("Wrong Admin Login");
}

// LOAD RETAILERS
function loadRetailers(){
let list=JSON.parse(localStorage.getItem("retailers")||"[]");
retailerList.innerHTML="";

list.forEach((r,i)=>{
retailerList.innerHTML+=`
<div style="border:1px solid #ccc;margin:5px;padding:5px">
<b>${r.name}</b><br>
User: ${r.user}<br>
Status: ${r.status}
${r.status=="pending"?<br><button class="approve" onclick="approve(${i})">Approve</button>:""}
</div>`;
});
}

// APPROVE
function approve(i){
let list=JSON.parse(localStorage.getItem("retailers"));
list[i].status="approved";
localStorage.setItem("retailers",JSON.stringify(list));
loadRetailers();
}

// RETAILER LOGIN
function retailerLogin(){
let list=JSON.parse(localStorage.getItem("retailers")||"[]");
let user=retUser.value;
let pass=retPass.value;

let r=list.find(x=>x.user==user && x.pass==pass);

if(!r) return retMsg.innerText="Wrong ID Password";

if(r.status!="approved")
return retMsg.innerText="Not Authorized! Wait Admin Approval";

hideAll();
retailerPanel.classList.remove("hidden");
}

// LOGOUT
function logout(){
location.reload();
}

</script>
</body>
</html>