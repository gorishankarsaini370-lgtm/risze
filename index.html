<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>मोबाइल रिचार्ज पोर्टल</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6">
  <div class="max-w-md mx-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold mb-4">मोबाइल रिचार्ज</h1>
    
    <label class="block mb-2">मोबाइल नंबर डालें:</label>
    <input type="text" id="mobileNumber" placeholder="10 अंक का नंबर" class="border p-2 w-full mb-4">

    <button onclick="detectOperator()" class="bg-blue-500 text-white px-4 py-2 rounded mb-4 w-full">ऑपरेटर डिटेक्ट करें</button>

    <div id="operatorSection" class="mb-4 hidden">
      <p>आपका ऑपरेटर: <span id="operatorName"></span></p>
      <button onclick="viewPlans()" class="bg-green-500 text-white px-4 py-2 rounded mt-2">View Plans</button>
    </div>

    <div id="plansSection" class="hidden mt-4">
      <h2 class="font-bold mb-2">प्लान्स:</h2>
      <div id="plansList" class="space-y-2"></div>
    </div>

    <div id="successMsg" class="hidden mt-4 p-2 bg-green-100 text-green-800 rounded"></div>
  </div>

<script>
let operator = "";

function detectOperator() {
    let mobile = document.getElementById('mobileNumber').value;
    if(mobile.length !== 10) { alert("सही 10 अंक का नंबर डालें"); return; }

    // Prefix logic (सिंपल उदाहरण)
    let prefix = mobile.substring(0, 4);
    if(["9810","9811"].includes(prefix)) operator = "Jio";
    else if(["9876","9877"].includes(prefix)) operator = "Airtel";
    else operator = "Unknown";

    document.getElementById('operatorName').innerText = operator;
    document.getElementById('operatorSection').classList.remove("hidden");
}

function viewPlans() {
    document.getElementById('plansSection').classList.remove("hidden");
    let plansList = document.getElementById('plansList');
    plansList.innerHTML = "";

    // Fake API / Hardcoded Plans Example
    let plans = [
        {name:"रिचार्ज ₹199", benefits:"1.5GB/दिन, 28 दिन वैधता", amount:199},
        {name:"रिचार्ज ₹399", benefits:"2GB/दिन, 56 दिन वैधता", amount:399},
    ];

    plans.forEach(plan => {
        let planDiv = document.createElement("div");
        planDiv.className = "border p-2 rounded flex justify-between items-center";
        planDiv.innerHTML = `
            <div>
                <p class="font-bold">${plan.name}</p>
                <p class="text-sm">${plan.benefits}</p>
            </div>
            <button class="bg-blue-500 text-white px-3 py-1 rounded" onclick="recharge(${plan.amount}, '${plan.benefits}')">Recharge</button>
        `;
        plansList.appendChild(planDiv);
    });
}

function recharge(amount, benefits) {
    let mobile = document.getElementById('mobileNumber').value;

    // Backend API Call (Pseudocode)
    fetch("/api/recharge", {
        method:"POST",
        headers:{"Content-Type":"application/json"},
        body: JSON.stringify({mobile, operator, amount, benefits})
    })
    .then(res=>res.json())
    .then(data=>{
        if(data.status==="success"){
            document.getElementById('successMsg').innerText = ₹${amount} का रिचार्ज सक्सेसफुल! Benfits: ${benefits};
            document.getElementById('successMsg').classList.remove("hidden");
        } else {
            alert("Recharge failed!");
        }
    });
}
</script>
</body>
</html>